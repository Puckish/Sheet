var LZString=function(){function e(e,t){if(!n[e]){n[e]={};for(var o=0;o<e.length;o++)n[e][e.charAt(o)]=o}return n[e][t]}var t=String.fromCharCode,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={},a={compressToBase64:function(e){if(null==e)return"";var t=a._compress(e,6,function(e){return o.charAt(e)});switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:a._decompress(t.length,32,function(r){return e(o,t.charAt(r))})},compressToUTF16:function(e){return null==e?"":a._compress(e,15,function(e){return t(e+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:a._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){for(var t=a.compress(e),o=new Uint8Array(2*t.length),r=0,n=t.length;n>r;r++){var i=t.charCodeAt(r);o[2*r]=i>>>8,o[2*r+1]=i%256}return o},decompressFromUint8Array:function(e){if(null==e)return a.decompress(e);for(var o=new Array(e.length/2),r=0,n=o.length;n>r;r++)o[r]=256*e[2*r]+e[2*r+1];var i=[];return o.forEach(function(e){i.push(t(e))}),a.decompress(i.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":a._compress(e,6,function(e){return r.charAt(e)})},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),a._decompress(t.length,32,function(o){return e(r,t.charAt(o))}))},compress:function(e){return a._compress(e,16,function(e){return t(e)})},_compress:function(e,t,o){if(null==e)return"";var r,n,a,i={},s={},u="",c="",l="",p=2,f=3,d=2,h=[],m=0,v=0;for(a=0;a<e.length;a+=1)if(u=e.charAt(a),Object.prototype.hasOwnProperty.call(i,u)||(i[u]=f++,s[u]=!0),c=l+u,Object.prototype.hasOwnProperty.call(i,c))l=c;else{if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(r=0;d>r;r++)m<<=1,v==t-1?(v=0,h.push(o(m)),m=0):v++;for(n=l.charCodeAt(0),r=0;8>r;r++)m=m<<1|1&n,v==t-1?(v=0,h.push(o(m)),m=0):v++,n>>=1}else{for(n=1,r=0;d>r;r++)m=m<<1|n,v==t-1?(v=0,h.push(o(m)),m=0):v++,n=0;for(n=l.charCodeAt(0),r=0;16>r;r++)m=m<<1|1&n,v==t-1?(v=0,h.push(o(m)),m=0):v++,n>>=1}0==--p&&(p=Math.pow(2,d),d++),delete s[l]}else for(n=i[l],r=0;d>r;r++)m=m<<1|1&n,v==t-1?(v=0,h.push(o(m)),m=0):v++,n>>=1;0==--p&&(p=Math.pow(2,d),d++),i[c]=f++,l=String(u)}if(""!==l){if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(r=0;d>r;r++)m<<=1,v==t-1?(v=0,h.push(o(m)),m=0):v++;for(n=l.charCodeAt(0),r=0;8>r;r++)m=m<<1|1&n,v==t-1?(v=0,h.push(o(m)),m=0):v++,n>>=1}else{for(n=1,r=0;d>r;r++)m=m<<1|n,v==t-1?(v=0,h.push(o(m)),m=0):v++,n=0;for(n=l.charCodeAt(0),r=0;16>r;r++)m=m<<1|1&n,v==t-1?(v=0,h.push(o(m)),m=0):v++,n>>=1}0==--p&&(p=Math.pow(2,d),d++),delete s[l]}else for(n=i[l],r=0;d>r;r++)m=m<<1|1&n,v==t-1?(v=0,h.push(o(m)),m=0):v++,n>>=1;0==--p&&(p=Math.pow(2,d),d++)}for(n=2,r=0;d>r;r++)m=m<<1|1&n,v==t-1?(v=0,h.push(o(m)),m=0):v++,n>>=1;for(;;){if(m<<=1,v==t-1){h.push(o(m));break}v++}return h.join("")},decompress:function(e){return null==e?"":""==e?null:a._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(e,o,r){var n,a,i,s,u,c,l,p=[],f=4,d=4,h=3,m="",v=[],g={val:r(0),position:o,index:1};for(n=0;3>n;n+=1)p[n]=n;for(i=0,u=Math.pow(2,2),c=1;c!=u;)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=o,g.val=r(g.index++)),i|=(s>0?1:0)*c,c<<=1;switch(i){case 0:for(i=0,u=Math.pow(2,8),c=1;c!=u;)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=o,g.val=r(g.index++)),i|=(s>0?1:0)*c,c<<=1;l=t(i);break;case 1:for(i=0,u=Math.pow(2,16),c=1;c!=u;)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=o,g.val=r(g.index++)),i|=(s>0?1:0)*c,c<<=1;l=t(i);break;case 2:return""}for(p[3]=l,a=l,v.push(l);;){if(g.index>e)return"";for(i=0,u=Math.pow(2,h),c=1;c!=u;)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=o,g.val=r(g.index++)),i|=(s>0?1:0)*c,c<<=1;switch(l=i){case 0:for(i=0,u=Math.pow(2,8),c=1;c!=u;)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=o,g.val=r(g.index++)),i|=(s>0?1:0)*c,c<<=1;p[d++]=t(i),l=d-1,f--;break;case 1:for(i=0,u=Math.pow(2,16),c=1;c!=u;)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=o,g.val=r(g.index++)),i|=(s>0?1:0)*c,c<<=1;p[d++]=t(i),l=d-1,f--;break;case 2:return v.join("")}if(0==f&&(f=Math.pow(2,h),h++),p[l])m=p[l];else{if(l!==d)return null;m=a+a.charAt(0)}v.push(m),p[d++]=a+m.charAt(0),a=m,0==--f&&(f=Math.pow(2,h),h++)}}};return a}();function clearForm(){document.getElementById("charSheet").reset()}function setTitle(){var e=$(document).attr("title");if(e.indexOf(" -- ")>=0)var t=e.indexOf(" -- "),o=e.substring(t+4);else o=e;var r=$("#charName").val()+" -- "+o;$(document).attr("title",r)}function putCharstuff(){var e={};$.each($("form").serializeArray(),function(){e[this.name]=this.value});var t=LZString.compressToEncodedURIComponent(JSON.stringify(e)),o=location.href.replace(location.hash,"").length+t.length;o>2036&&alert("Length of "+o+" exceeds maximum 2038. Remove some text and re-save to ensure your bookmark works!"),window.location.hash=t,setTitle()}function loadCharstuff(){var e=window.location.hash.substr(1),t=LZString.decompressFromEncodedURIComponent(e),o=JSON.parse(t),r=document.getElementById("charSheet");populate(r,o)}"function"==typeof define&&define.amd?define(function(){return LZString}):"undefined"!=typeof module&&null!=module&&(module.exports=LZString),function(e){var t=function(e,o,r){for(var n in o)if(o.hasOwnProperty(n)){var a=n,i=o[n];if(void 0===i&&(i=""),null===i&&(i=""),void 0!==r&&(a=r+"["+n+"]"),i.constructor===Array)a+="[]";else if("object"==typeof i){t(e,i,a);continue}var s=e.elements.namedItem(a);if(s)switch(s.type||s[0].type){default:s.value=i;break;case"radio":case"checkbox":if(s.length)for(var u=0;u<s.length;u++)s[u].checked=i.indexOf(s[u].value)>-1;else s.checked=i.indexOf(s.value)>-1;break;case"select-multiple":for(var c=i.constructor==Array?i:[i],l=0;l<s.options.length;l++)s.options[l].selected|=c.indexOf(s.options[l].value)>-1;break;case"select":case"select-one":s.value=i.toString()||i;break;case"date":s.value=new Date(i).toISOString().split("T")[0]}}};"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports?module.exports=t:e.populate=t}(this);var autoExpand=function(e){e.style.height="inherit";var t=window.getComputedStyle(e),o=parseInt(t.getPropertyValue("border-top-width"),10)+parseInt(t.getPropertyValue("padding-top"),10)+e.scrollHeight+parseInt(t.getPropertyValue("padding-bottom"),10)+parseInt(t.getPropertyValue("border-bottom-width"),10)-20;e.style.height=o+"px"};function is_url(e){return regexp=/(http)?s?:?(\/\/[^"']*\.(?:png|jpg|jpeg|gif|png|svg))/,!!regexp.test(e)}function resizeBoxes(){for(var e=document.getElementsByTagName("textarea"),t=0;t<e.length;t+=1)autoExpand(e[t])}function displayButtons(){$("#charSheet").after("<div class='charSheetButtons' style='text-align: center;''><button type='button' value='Save'  onclick='putCharstuff();' style='margin: 0 auto;'>Save</button> <button type='button' value='Load' onclick='loadCharstuff();' style='margin: 0 auto;'>Load</button> <button type='button' value='Clear' onclick='clearForm()'>Clear</button></div>")}function changePortrait(){var e=$("#charPortraitURI").val(),t=$("input#charPortraitURI");is_url(e)?$("#charImage").attr("src",e):(t.val(t.data("original-value")),$("#charImage").attr("src",t.data("original-value")))}function initialStuff(){loadCharstuff(),resizeBoxes(),displayButtons(),"function"==typeof charLoaded&&charLoaded(),changePortrait(),$("#charName").val()&&setTitle(),$("#charPortraitURI").blur(function(){changePortrait()})}document.addEventListener("input",function(e){"textarea"===e.target.tagName.toLowerCase()&&autoExpand(e.target)},!1),window.addEventListener("resize",function(e){resizeBoxes()}),$(document).ready(function(){initialStuff()});